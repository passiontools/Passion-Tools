<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Safety Checker - PassionTools</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --red: #ef4444;
            --purple: #a855f7;
            --blue: #2563eb;
            --green: #16a34a;
            --orange: #f59e0b;
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --radius: 16px;
            --transition: all 0.3s ease;
        }
        body.dark-mode {
            --bg-color: #111827;
            --card-bg: #1f2937;
            --text-primary: #f9fafb;
            --text-secondary: #9ca3af;
            --border-color: #374151;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-primary); min-height: 100vh; display: flex; flex-direction: column; transition: background-color 0.3s, color 0.3s; }
        header { background-color: var(--card-bg); border-bottom: 1px solid var(--border-color); padding: 16px 0; position: sticky; top: 0; z-index: 100; transition: background-color 0.3s; }
        .container { width: 100%; max-width: 1000px; margin: 0 auto; padding: 0 20px; }
        .header-content { display: flex; justify-content: space-between; align-items: center; }
        .brand-logo { text-decoration: none; }
        .logo-text { font-size: 24px; font-weight: 800; letter-spacing: -0.5px; color: var(--text-primary); }
        .logo-tools { background: linear-gradient(to right, var(--red), var(--purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header-actions { display: flex; align-items: center; gap: 20px; }
        .dark-toggle { background: transparent; border: none; color: var(--text-secondary); font-size: 20px; cursor: pointer; transition: var(--transition); display: flex; align-items: center; justify-content: center; }
        .dark-toggle:hover { color: var(--blue); transform: scale(1.1); }
        .back-link { text-decoration: none; color: var(--text-secondary); font-weight: 600; display: flex; align-items: center; gap: 8px; transition: var(--transition); }
        .back-link:hover { color: var(--red); }
        .tool-container { margin: 40px auto; flex: 1; width: 100%; }
        .tool-header { text-align: center; margin-bottom: 30px; }
        .tool-title { font-size: 36px; font-weight: 800; margin-bottom: 12px; }
        .stage { display: none; animation: fadeIn 0.4s ease; }
        .stage.active { display: block; }
        .card { background: var(--card-bg); padding: 30px; border-radius: var(--radius); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid var(--border-color); transition: background-color 0.3s, border-color 0.3s; }
        .input-group { position: relative; margin-bottom: 20px; }
        .input-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--text-secondary); font-size: 18px; }
        .url-input { width: 100%; padding: 18px 18px 18px 45px; border-radius: 12px; border: 2px solid var(--border-color); font-size: 16px; background: var(--bg-color); color: var(--text-primary); outline: none; transition: var(--transition); }
        .url-input:focus { border-color: var(--blue); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .error-msg { color: var(--red); font-size: 14px; margin-top: 8px; display: none; font-weight: 500; }
        .btn-check { background: linear-gradient(135deg, var(--blue), var(--purple)); color: white; border: none; padding: 18px 30px; border-radius: 12px; font-size: 16px; font-weight: 700; width: 100%; cursor: pointer; transition: var(--transition); box-shadow: 0 4px 15px rgba(37,99,235,0.3); }
        .btn-check:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(37,99,235,0.4); }
        .scan-animation { text-align: center; padding: 40px 0; }
        .scan-radar { position: relative; width: 80px; height: 80px; margin: 0 auto 20px; border-radius: 50%; border: 3px solid var(--border-color); border-top-color: var(--blue); animation: spin 1s linear infinite; }
        .progress-bar-bg { width: 100%; height: 8px; background: var(--border-color); border-radius: 4px; overflow: hidden; margin-top: 20px; }
        .progress-bar-fill { height: 100%; width: 0%; background: linear-gradient(to right, var(--blue), var(--purple)); transition: width 0.1s linear; }
        .scan-step { font-size: 14px; color: var(--text-secondary); margin-top: 10px; font-weight: 500; height: 20px; }
        .result-header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid var(--border-color); }
        .result-icon { font-size: 40px; }
        .status-safe { color: var(--green); }
        .status-suspicious { color: var(--orange); }
        .status-threat { color: var(--red); }
        .risk-meter-container { margin-bottom: 25px; background: var(--bg-color); padding: 20px; border-radius: 8px; border: 1px solid var(--border-color); }
        .risk-labels { display: flex; justify-content: space-between; font-size: 11px; font-weight: 800; color: var(--text-secondary); margin-bottom: 8px; text-transform: uppercase; }
        .risk-bar-bg { width: 100%; height: 12px; background: var(--border-color); border-radius: 6px; overflow: hidden; position: relative; }
        .risk-bar-fill { height: 100%; width: 0%; border-radius: 6px; transition: width 1s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.5s ease; }
        .risk-score-text { text-align: center; margin-top: 12px; font-weight: 800; font-size: 16px; }
        .risk-low { background: var(--green); }
        .risk-med { background: var(--orange); }
        .risk-high { background: var(--red); }
        .analysis-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .analysis-item { background: var(--bg-color); padding: 15px; border-radius: 8px; border: 1px solid var(--border-color); display: flex; align-items: center; gap: 12px; }
        .analysis-item.full { grid-column: 1 / -1; }
        .item-icon { font-size: 20px; width: 24px; text-align: center; }
        .item-icon.pass { color: var(--green); }
        .item-icon.fail { color: var(--red); }
        .item-icon.warn { color: var(--orange); }
        .item-icon.neutral { color: var(--blue); }
        .item-content h4 { font-size: 13px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 2px; }
        .item-content p { font-size: 14px; font-weight: 600; word-break: break-all; }
        .actions { display: flex; gap: 15px; }
        .btn-outline { flex: 1; background: transparent; border: 2px solid var(--border-color); color: var(--text-primary); padding: 14px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; justify-content: center; align-items: center; gap: 8px; font-size: 14px; }
        .btn-outline:hover { background: var(--bg-color); border-color: var(--blue); color: var(--blue); }
        footer { background: #111827; color: white; padding: 30px 0; margin-top: auto; text-align: center; font-size: 14px; transition: background-color 0.3s; }
        body.dark-mode footer { background: #000000; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (max-width: 600px) {
            .tool-title { font-size: 26px; }
            .analysis-grid { grid-template-columns: 1fr; }
            .actions { flex-direction: column; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="brand-logo">
                    <div class="logo-text">Passion<span class="logo-tools">Tools</span></div>
                </a>
                <div class="header-actions">
                    <a href="index.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Tools</a>
                    <button class="dark-toggle" id="darkToggle" title="Toggle Dark Mode">
                        <i class="fas fa-moon" id="themeIcon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <main class="container tool-container">
        <div class="tool-header">
            <h1 class="tool-title">URL Safety Checker</h1>
            <p style="color: var(--text-secondary);">Analyze links for malware, phishing patterns, and structural anomalies.</p>
        </div>
        <div class="stage active" id="stageInput">
            <div class="card">
                <div class="input-group">
                    <i class="fas fa-link input-icon"></i>
                    <input type="text" id="urlInput" class="url-input" placeholder="Enter website URL (e.g., example.com)" autocomplete="off">
                    <div class="error-msg" id="errorMsg">Please enter a valid URL.</div>
                </div>
                <button class="btn-check" id="checkBtn">Check URL Safety</button>
            </div>
        </div>
        <div class="stage" id="stageScan">
            <div class="card scan-animation">
                <div class="scan-radar"></div>
                <h3 id="scanningUrl" style="word-break: break-all; margin: 0 20px;"></h3>
                <div class="progress-bar-bg"><div class="progress-bar-fill" id="progressBar"></div></div>
                <div class="scan-step" id="scanStep">Initializing heuristics...</div>
            </div>
        </div>
        <div class="stage" id="stageResult">
            <div class="card">
                <div class="result-header">
                    <i class="fas result-icon" id="resIcon"></i>
                    <div>
                        <h2 id="resTitle">Status</h2>
                        <p style="color: var(--text-secondary); font-size: 14px;" id="resDesc"></p>
                    </div>
                </div>
                <div class="risk-meter-container">
                    <div class="risk-labels"><span>Safe (0)</span><span>Dangerous (100)</span></div>
                    <div class="risk-bar-bg"><div class="risk-bar-fill" id="riskBarFill"></div></div>
                    <div class="risk-score-text">Risk Score: <span id="riskScoreValue">0</span>/100</div>
                </div>
                <div class="analysis-grid" id="analysisGrid"></div>
                <div class="actions">
                    <button class="btn-outline" id="copyBtn"><i class="far fa-copy"></i> Copy Report</button>
                    <button class="btn-outline" onclick="resetTool()"><i class="fas fa-redo"></i> Scan Another</button>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container"><p>&copy; 2026 PassionTools. Secure client-side processing.</p></div>
    </footer>
    <script>
        const stages = { input: document.getElementById('stageInput'), scan: document.getElementById('stageScan'), result: document.getElementById('stageResult') };
        const urlInput = document.getElementById('urlInput');
        const checkBtn = document.getElementById('checkBtn');
        const errorMsg = document.getElementById('errorMsg');
        const darkToggle = document.getElementById('darkToggle');
        const themeIcon = document.getElementById('themeIcon');
        const scanUI = { url: document.getElementById('scanningUrl'), bar: document.getElementById('progressBar'), step: document.getElementById('scanStep') };
        const resUI = { icon: document.getElementById('resIcon'), title: document.getElementById('resTitle'), desc: document.getElementById('resDesc'), riskFill: document.getElementById('riskBarFill'), riskValue: document.getElementById('riskScoreValue'), grid: document.getElementById('analysisGrid'), copyBtn: document.getElementById('copyBtn') };
        let currentReport = "";

        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            themeIcon.className = 'fas fa-sun';
        }

        darkToggle.onclick = () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeIcon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
        };

        function switchStage(stageName) {
            Object.values(stages).forEach(s => s.classList.remove('active'));
            stages[stageName].classList.add('active');
        }

        function resetTool() {
            urlInput.value = '';
            errorMsg.style.display = 'none';
            resUI.riskFill.style.width = '0%';
            resUI.riskFill.className = 'risk-bar-fill';
            resUI.riskValue.textContent = '0';
            resUI.copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy Report';
            switchStage('input');
        }

        async function hashUrl(url) {
            if (!crypto.subtle) return "N/A (HTTPS required for hashing)";
            try {
                const buffer = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(url));
                return Array.from(new Uint8Array(buffer)).map(b => b.toString(16).padStart(2, "0")).join("");
            } catch (e) {
                return "Hashing Failed";
            }
        }

        function validateUrl(val) {
            if (!val.trim()) return false;
            let formatted = val.trim();
            if (!/^https?:\/\//i.test(formatted)) formatted = 'https://' + formatted; 
            try { new URL(formatted); return formatted; } catch (e) { return false; }
        }

        urlInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                checkBtn.click();
            }
        });

        checkBtn.onclick = async () => {
            const validUrl = validateUrl(urlInput.value);
            if (!validUrl) { errorMsg.style.display = 'block'; return; }
            errorMsg.style.display = 'none';
            switchStage('scan');
            scanUI.url.textContent = validUrl;
            
            const parsedUrl = new URL(validUrl);
            const report = analyzeUrl(parsedUrl, validUrl);
            report.hash = await hashUrl(validUrl);
            
            await simulateScan();
            displayResult(report, parsedUrl);
        };

        function analyzeUrl(urlObj, rawUrl) {
            let score = 0;
            const checks = [];
            const isHttps = urlObj.protocol === 'https:';
            
            if (!isHttps) { 
                score += 25; 
                checks.push({ id: 'https', status: 'fail', title: 'Connection Security', desc: 'Unencrypted HTTP connection detected.' }); 
            } else { 
                checks.push({ id: 'https', status: 'pass', title: 'Connection Security', desc: 'Secure HTTPS connection verified.' }); 
            }
            
            const isIp = /^(\d{1,3}\.){3}\d{1,3}$/.test(urlObj.hostname);
            if (isIp) { 
                score += 40; 
                checks.push({ id: 'ip', status: 'fail', title: 'Domain Format', desc: 'IP address used instead of domain name.' }); 
            } else { 
                checks.push({ id: 'ip', status: 'pass', title: 'Domain Format', desc: 'Standard domain name structure.' }); 
            }
            
            const subdomains = urlObj.hostname.split('.').filter(p => p !== 'www');
            if (subdomains.length > 3) { 
                score += 20; 
                checks.push({ id: 'sub', status: 'warn', title: 'Subdomain Count', desc: 'Multiple subdomains detected (common in phishing).' }); 
            } else { 
                checks.push({ id: 'sub', status: 'pass', title: 'Subdomain Count', desc: 'Normal subdomain structure.' }); 
            }
            
            if (rawUrl.length > 100) { 
                score += 15; 
                checks.push({ id: 'len', status: 'warn', title: 'URL Length', desc: 'Unusually long URL. Often used to hide parameters.' }); 
            } else { 
                checks.push({ id: 'len', status: 'pass', title: 'URL Length', desc: 'Standard URL length.' }); 
            }
            
            const suspiciousWords = ['login', 'verify', 'update', 'secure', 'free', 'win', 'bonus', 'account', 'banking', 'auth', 'admin', 'billing'];
            const foundWords = suspiciousWords.filter(w => rawUrl.toLowerCase().includes(w));
            if (foundWords.length > 0) { 
                score += (foundWords.length * 15); 
                checks.push({ id: 'key', status: 'fail', title: 'Suspicious Keywords', desc: `Detected: ${foundWords.join(', ')}` }); 
            } else { 
                checks.push({ id: 'key', status: 'pass', title: 'Suspicious Keywords', desc: 'No phishing keywords found.' }); 
            }
            
            score = Math.min(score, 100);
            return { score, checks, raw: rawUrl, domain: urlObj.hostname };
        }

        async function simulateScan() {
            let progress = 0;
            scanUI.bar.style.width = '0%';
            while (progress < 100) {
                await new Promise(r => setTimeout(r, 100));
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                scanUI.bar.style.width = progress + '%';
                if (progress < 30) scanUI.step.textContent = "Validating DNS records...";
                else if (progress < 60) scanUI.step.textContent = "Checking SSL/TLS certificates...";
                else if (progress < 85) scanUI.step.textContent = "Analyzing structural patterns...";
                else scanUI.step.textContent = "Finalizing safety report...";
            }
            await new Promise(r => setTimeout(r, 200));
        }

        function displayResult(report, parsedUrl) {
            switchStage('result');
            resUI.grid.innerHTML = '';
            
            setTimeout(() => {
                resUI.riskFill.style.width = `${report.score}%`;
                resUI.riskValue.textContent = report.score;
                resUI.riskFill.className = 'risk-bar-fill ' + (report.score <= 29 ? 'risk-low' : report.score <= 69 ? 'risk-med' : 'risk-high');
                resUI.riskValue.style.color = report.score <= 29 ? 'var(--green)' : report.score <= 69 ? 'var(--orange)' : 'var(--red)';
            }, 100);
            
            resUI.icon.className = 'fas result-icon';
            if (report.score <= 29) {
                resUI.icon.classList.add('fa-check-circle', 'status-safe');
                resUI.title.textContent = "Safe URL";
                resUI.title.style.color = 'var(--text-primary)';
                resUI.desc.textContent = "No significant risk factors found.";
            } else if (report.score <= 69) {
                resUI.icon.classList.add('fa-exclamation-triangle', 'status-suspicious');
                resUI.title.textContent = "Suspicious URL";
                resUI.title.style.color = 'var(--orange)';
                resUI.desc.textContent = "Proceed with caution. Anomalies detected.";
            } else {
                resUI.icon.classList.add('fa-times-circle', 'status-threat');
                resUI.title.textContent = "Dangerous URL";
                resUI.title.style.color = 'var(--red)';
                resUI.desc.textContent = "High risk! Strong phishing or malware indicators.";
            }

            const icons = { pass: 'fa-check-circle', fail: 'fa-times-circle', warn: 'fa-exclamation-triangle', neutral: 'fa-info-circle' };
            
            const renderItem = (status, title, desc, full = false) => `
                <div class="analysis-item ${full ? 'full' : ''}">
                    <i class="fas ${icons[status] || icons.neutral} item-icon ${status}"></i>
                    <div class="item-content"><h4>${title}</h4><p>${desc}</p></div>
                </div>`;
                
            resUI.grid.innerHTML += renderItem('neutral', 'Extracted Domain', report.domain);
            report.checks.forEach(c => resUI.grid.innerHTML += renderItem(c.status, c.title, c.desc));
            resUI.grid.innerHTML += renderItem('neutral', 'SHA-256 Hash', `<span style="font-family:monospace;font-size:11px;">${report.hash}</span>`, true);
            
            currentReport = `URL: ${report.raw}\nDomain: ${report.domain}\nRisk Score: ${report.score}/100\nStatus: ${resUI.title.textContent}\nSHA-256: ${report.hash}`;
        }

        resUI.copyBtn.onclick = () => {
            navigator.clipboard.writeText(currentReport).then(() => {
                resUI.copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => resUI.copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy Report', 2000);
            });
        };
    </script>
</body>
</html>
